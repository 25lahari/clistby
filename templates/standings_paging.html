{% load el_pagination_tags %}

{% paginate 50 statistics %}
{% for statistic in statistics %}
<tr>
  <td>{{ statistic.place }}</td>
  <td class="handle-cell">
  {% if statistic.addition.name %}
    <div title="{{ statistic.account.key }}">{{ statistic.addition.name }}</div>
  {% else %}
    {{ statistic.account.key }}
  {% endif %}
  </td>
  <td>{{ statistic.solving|floatformat:'-3' }}</td>
  {% for problem in contest.info.problems|get_division_problems:params %}
    {% with key=problem|get_problem_key  %}
    {% with stat=statistic.addition.problems|get_item:key %}
    <td class="problem-cell">
      {% if stat.url %}<a href="{{ stat.url }}">{% endif %}
      {% if stat and stat.result is not None %}
        <div
          class="{% if stat.result|slice:":1" == "+" or stat.result|asfloat:0 > 0 %}acc{% else %}rej{% endif %}"
          {% if stat.status and stat.result and stat.result|asfloat:0 <= 0 %}title="{{ stat.status }}"{% endif %}
        >
          {% if stat.result|slice:":1" == "+" %}
            {{ stat.result }}
          {% else %}
            {{ stat.result|floatformat:'-3' }}
          {% endif %}
        </div>
        {% if stat.time %}<small class="text-muted">{{ stat.time }}</small>{% endif %}
      {% else %}
        {% if stat.status %}<small class="text-muted">{{ stat.status }}</small>{% endif %}
      {% endif %}
      {% if stat.url %}</a>{% endif %}
    </td>
    {% endwith %}
    {% endwith %}
  {% endfor %}
</tr>
{% endfor %}
{% show_more_table %}
